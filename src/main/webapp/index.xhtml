<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:head>
</h:head>
<h:body>


	<p:layout fullPage="true">
		<ui:remove>
			<p:layoutUnit position="north" size="100" header="Top"
				resizable="true" closable="true" collapsible="true">
				<h:outputText value="North unit content." />
			</p:layoutUnit>

			<p:layoutUnit position="south" size="100" header="Bottom"
				resizable="true" closable="true" collapsible="true">

			</p:layoutUnit>

			<p:layoutUnit position="west" size="200" header="Left"
				resizable="true" closable="true" collapsible="true">

			</p:layoutUnit>
			
			<p:layoutUnit position="east" size="40%" header="Right"
			style="height:100%;" resizable="true" closable="true"
			collapsible="true" effect="drop">
			<h:panelGroup layout="block" id="rawString">
				<h:form>
					<pe:codeMirror id="codeMirror" theme="cobalt" style="height:auto;"
						lineNumbers="true" value="#{apiBean.apiWrapper.rawString}"
						matchBrackets="true" />
				</h:form>
			</h:panelGroup>
		</p:layoutUnit>
		</ui:remove>



		<p:layoutUnit position="east" size="40%" header="Right"
			style="height:100%;" resizable="true" closable="false"
			collapsible="true" effect="drop">
			<h:panelGroup layout="block" id="rawString">
				<pre>#{apiBean.apiWrapper.rawString}</pre>				
			</h:panelGroup>
		</p:layoutUnit>

		<p:layoutUnit position="center" header="Center">

			<h:form>

				<p:inputTextarea value="#{apiBean.strUrl}" style="width:100%;"
					rows="2" />

				<h:panelGroup layout="block" id="graph">
					<p:chart type="line" model="#{apiBean.lineChart}"
						style="height:300px;" />

					<p:poll interval="10" listener="#{apiBean.refresh}"
						update="graph rawString" />
						
					<p:dataTable id="myTable" var="lineResult" 
					            value="#{apiBean.apiWrapper.rows}" paginatorAlwaysVisible="false"
					            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
					            paginator="true" rows="30" rowKey="#{lineResult}">
					            <p:columns value="#{apiBean.apiWrapper.headers}" var="column"  columnIndexVar="i" >
					                <f:facet name="header">
					                    <h:outputText value= "#{column}" />
					                </f:facet>
					                <h:outputText value= "#{lineResult.get(column)}" />
					            </p:columns>
					</p:dataTable>
					

				</h:panelGroup>


			</h:form>
		</p:layoutUnit>

	</p:layout>





















</h:body>
</html>